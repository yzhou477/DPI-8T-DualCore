# RISC-V 32位指令分类及位域说明（bubble_sort）

## I-型指令 (I-type)

格式: `[11:0] imm | [19:15] rs1 | [14:12] funct3 | [24:20] rd | [31:25] opcode`

| 指令     | 描述                         | 位域格式                                    |
| -------- | ---------------------------- | ------------------------------------------- |
| **li**   | Load Immediate               | 伪指令，通常被扩展为 addi 或 lui+addi 组合  |
| **addi** | Add Immediate                | `[11:0] imm                                 |
| **slli** | Shift Left Logical Immediate | `[11:5] 0000000                             |
| **lw**   | Load Word                    | `[11:0] imm                                 |
| **ret**  | Return                       | 伪指令，对应 `jalr x0, 0(x1)`，即 `[11:0] 0 |

## S-型指令 (S-type)

格式: `[11:5] imm[11:5] | [19:15] rs2 | [14:12] funct3 | [24:20] rs1 | [31:25] imm[4:0] | [6:0] opcode`

| 指令   | 描述       | 位域格式          |
| ------ | ---------- | ----------------- |
| **sw** | Store Word | `[11:5] imm[11:5] |

## R-型指令 (R-type)

格式: `[31:25] funct7 | [24:20] rs2 | [19:15] rs1 | [14:12] funct3 | [11:7] rd | [6:0] opcode`

| 指令    | 描述 | 位域格式                                          |
| ------- | ---- | ------------------------------------------------- |
| **add** | Add  | `[31:25] 0000000                                  |
| **mv**  | Move | 伪指令，对应 `addi rd, rs, 0` 或 `add rd, rs, x0` |

## B-型指令 (B-type)

格式: `[31] imm[12] | [30:25] imm[10:5] | [24:20] rs2 | [19:15] rs1 | [14:12] funct3 | [11:8] imm[4:1] | [7] imm[11] | [6:0] opcode`

| 指令    | 描述                       | 位域格式                            |
| ------- | -------------------------- | ----------------------------------- |
| **bge** | Branch if Greater or Equal | `[31] imm[12]                       |
| **j**   | Jump                       | 伪指令，通常扩展为 `jal x0, offset` |

## J-型指令 (J-type)

格式: `[31] imm[20] | [30:21] imm[10:1] | [20] imm[11] | [19:12] imm[19:12] | [11:7] rd | [6:0] opcode`

| 指令    | 描述          | 位域格式      |
| ------- | ------------- | ------------- |
| **jal** | Jump and Link | `[31] imm[20] |

## U-型指令 (U-type)

格式: `[31:12] imm[31:12] | [11:7] rd | [6:0] opcode`

| 指令    | 描述                 | 位域格式                                               |
| ------- | -------------------- | ------------------------------------------------------ |
| **la**  | Load Address         | 伪指令，通常扩展为 `auipc + addi` 或 `lui + addi` 组合 |
| **lui** | Load Upper Immediate | `[31:12] imm[31:12]                                    |

## 指令功能简述

### 算术指令

- `addi`: 将立即数与寄存器相加
- `add`: 两个寄存器相加
- `slli`: 逻辑左移立即数位

### 内存访问指令

- `lw`: 从内存加载一个字(32位)到寄存器
- `sw`: 将寄存器的值存储到内存

### 分支跳转指令

- `bge`: 如果第一个寄存器大于等于第二个寄存器，则分支
- `j`: 无条件跳转
- `jal`: 跳转并链接(将返回地址保存在目的寄存器)
- `ret`: 从子程序返回(跳转到返回地址)

### 伪指令

- `li`: 加载立即数到寄存器
- `la`: 加载地址到寄存器
- `mv`: 复制一个寄存器的值到另一个寄存器